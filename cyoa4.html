<!DOCTYPE html>
<html>
  <head>
    <title>Adventure Game</title>
    <style>
      #message {
        margin-bottom: 10px;
      }
      .option-button {
        margin-right: 5px;
      }
      #name-input {
        display: none;
      }
    </style>
  </head>
  <body>
    <div id="message"></div>
    <div id="options"></div>
    <div id="name-input">
      <input type="text" id="name-field" placeholder="Enter your name" />
      <button id="name-button" onclick="saveName()">Save</button>
    </div>
    <button id="start-button" onclick="startGame()">Start</button>
    <button id="continue-button" onclick="continueGame()" style="display: none;">Continue</button>
    <button id="play-again-button" onclick="startGame()" style="display: none;">Play Again</button>

    <script>
      // Define your story object with scenes and options
      const story = {
        currentScene: "startGame",
        playerName: null,
        
        startGame: function() {
          this.playerName = null;
          showMessage("You have just woken up, you don't know where you are, or how you got there.");
          showMessage("You don't even remember your name!");
          showMessage("As you yawn and rub your eyes, you realize even a temporary name may be helpful...");
          
          showNameInput();
        },
        
        scene2: function() {
          showMessage("Thank you, " + this.playerName + ", your adventure begins now!");
          showMessage("As you look around and take in your surroundings, you find yourself in a small wooded enclave.");
          
          this.currentScene = "scene3";
          showOptions([
            { text: "Kick at the rusted lock, hoping it will open.", action: () => this.scene3(1) },
            { text: "Look around to see if there is anything you can use to open the chest.", action: () => this.scene3(2) },
            { text: "You know, this is someone's property, I should probably leave it alone.", action: () => this.scene3(3) }
          ]);
        },
        
        scene3: function(option) {
          switch (option) {
            case 1:
              showMessage("You kick at the rusted lock, but it doesn't budge. It seems sturdy.");
              this.currentScene = "scene4";
              showOptions([
                { text: "Look around to see if there is anything you can use to open the chest.", action: () => this.scene4(1) },
                { text: "You know, this is someone's property, I should probably leave it alone.", action: () => this.scene4(2) }
              ]);
              break;
            case 2:
              showMessage("You search the area and find a crowbar hidden behind a tree. It might come in handy.");
              this.currentScene = "scene4";
              showOptions([
                { text: "Try using the crowbar to open the chest.", action: () => this.scene4(1) },
                { text: "You know, this is someone's property, I should probably leave it alone.", action: () => this.scene4(2) }
              ]);
              break;
            case 3:
              showMessage("You decide it's best not to meddle with someone else's property and leave the chest alone.");
              this.currentScene = "endGame";
              showEndMessage();
              break;
            default:
              showMessage("Please choose a valid option.");
              break;
          }
        },
        
        endGame: function() {
          showMessage("Congratulations, you have reached the end of the game!");
          showOptions([{ text: "Play Again", action: () => this.startGame() }]);
          this.currentScene = "startGame";
        },
      };
      
      // Helper functions for displaying messages, options, and managing user input
     
      function showMessage(message) {
        const messageElement = document.getElementById("message");
        messageElement.textContent = message + "\n"; // Update the message content instead of appending
        }
      
      function showOptions(options) {
        const optionsElement = document.getElementById("options");
        optionsElement.innerHTML = "";
        options.forEach((option, index) => {
          const button = document.createElement("button");
          button.innerText = option.text;
          button.className = "option-button";
          button.onclick = option.action;
          optionsElement.appendChild(button);
        });
        
        const continueButton = document.getElementById("continue-button");
        if (options.length === 0) {
          continueButton.style.display = "inline-block";
        } else {
          continueButton.style.display = "none";
        }
      }
      
      function startGame() {
        document.getElementById("start-button").style.display = "none";
        document.getElementById("continue-button").style.display = "none";
        document.getElementById("play-again-button").style.display = "none";
        document.getElementById("name-input").style.display = "none";
        document.getElementById("message").textContent = "";
        document.getElementById("options").textContent = "";
        story.startGame();
      }
      
      function continueGame() {
  const optionButtons = document.getElementsByClassName("option-button");
  while (optionButtons.length > 0) {
    optionButtons[0].parentNode.removeChild(optionButtons[0]);
  }

  const messageElement = document.getElementById("message");
  messageElement.textContent = ""; // Clear the message element

  story[story.currentScene]();
}
      
      function showNameInput() {
        const nameInput = document.getElementById("name-input");
        nameInput.style.display = "block";
      }
      
      function saveName() {
        const nameField = document.getElementById("name-field");
        const playerName = nameField.value;
        if (playerName.trim() === "") {
          showMessage("Please enter a valid name.");
        } else {
          story.playerName = playerName;
          document.getElementById("name-input").style.display = "none";
          story.scene2();
        }
      }
      
      function showEndMessage() {
        document.getElementById("play-again-button").style.display = "inline-block";
      }
    </script>
  </body>
</html>
